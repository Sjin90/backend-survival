## 4.CORS
- CORS(Cross-Origin Resource Sharing)
    교차 출처 리소스 공유로 추가 HTTP 헤더를 사용하여, 한 출처에서 실행 중인 웹 애플리케이션이 다른 출처의 선택한 자원에 접근할 수 있는 권한을 부여하도록 브라우저에 알려주는 체제이다.

    이렇게 출처를 비교하는 로직이 서버에 구현된 스펙이 아니라 브라우저에 구현되어 있는 스펙이다.
    만약 우리가 CORS 정책을 위반하는 리소스 요청을 하더라도 해당 서버가 같은 출처에서 보낸 요청만 받겠다는 로직을 가지고 있는 경우가 아니라면 서버는 정상적으로 응답을 하고, 이후 브라우저가 이 응답을 분석해서 CORS 정책 위반이라고 판단되면 그 응답을 사용하지 않고 그냥 버리는 순서인 것이다.

- 여기서 말하는 출처의 비교는?
    URL의 프로토콜,포트와 호스트가 모두 같음을 말한다.
    ex) http://www.test.com의 출처를 비교해 보면,
    http://www.test.com/dir1/test1.html    (O : 경로만 다름)
    https://www.test.com/test3.html        (X : 프로토콜이 다름)
    http://www.test.com:81/test1.html      (X : 포트다름 http://는 기본 80 default)
    http://www.test2.com/test2.html        (X : 호스트가 다름)

- 동일 출처 정책
    같은 출처에서만 리소스를 공유할 수 있다”라는 규칙을 가진 정책이다.
    웹에서 다른 출처에 있는 리소스를 가져와서 사용하는 일은 굉장히 흔한 일이라 무작정 막을 수 없기때문에 몇 가지 예외 조항을 두고 이 조항에 해당하는 리소스 요청은 출처가 다르더라도 허용한다. 그 중 하나가 “CORS 정책을 지킨 리소스 요청”이다.

- JSONP(JSON with Padding)
    자바스크립트 파일 내에서 다른 도메인에 데이터를 요청할 경우 동일 출처 정책에 위배되어 에러가 발생할때 JSONP의
    HTML의 Script요소로부터 요청되는 호출에는 보안상 정책이 적용되지 않는 다는 점을 이용한 우회방법이다. 
    ex) <script src=”https://test.com”></script>
    script요소는 src를 호출한 결과를 javascript를 불러와서 포함시키는 것이 아니고 실행시키는 태그이다. 
    하지만 이 방법을 사용하려면,
    1) 서버에서 Json형태로 데이터를 내려줘야한다.
        script태그의 결과물 자체를 변수에는 저장할 수 없기때문에 서버에서는 결과를 myCallback()이라는 함수로 갑싸서 내려주는 작업을 해줘야한다.
        ex) "myCallback({'name':'test'})"
    2) script태그로 받아온 Json 데이터를 브라우저 어딘가에 저장해놔야 쓸 수 있어야한다.
        서버에서 내려준 콜백(myCallback)함수가 미리 html에 정의되어있어야한다.

    결과적으로 보안상의 이슈로 더이상 사용하지 않음.

- `Access-Control-Allow-Origin`
    응답헤더로 요청을 보내는 프론트 주소와 받는 백엔드 주소가 다르면 CORS 에러 발생시 서버에서 응답 메시지 Access-Control-Allow-Origin 헤더에 프론트 주소를 적어주어야 에러가 나지 않는다.

- `@CrossOrigin`
    CORS를 스프링을 통해 설정할 수 있는 기능이다.
    @CrossOrigin 어노테이션을 붙여주면 기본적으로 '모든 도메인, 모든 요청방식' 에 대해 허용 한다는 뜻이다.
    위 예제에서 어노테이션을 메소드에 붙여줘야하기 때문에 해당 메소드만 모든 도메인, 모든 요청방식에 대해 허용하게 된다.
    다른 메소드는 허용되지않는다.
    만약 여러 메소드에 동일하게 적용하고 싶다면 Class 상단에 @CrossOrigin 어노테이션을 선언해주면 된다.

    '특정 도메인'만 허용하기 위해서는 Properties 중 origins는 허용할 도메인을 넣으면 된다.
    복수개일 경우 콤마로 구분하여 넣어주면 된다.
    ex) @CrossOrigin(origins = "http://test1.com, http://test2.com")