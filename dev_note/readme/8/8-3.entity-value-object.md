# 8-3.Entity, Value Object

1.  전술적 설계 (Tactical Design)

    DDD의 전략적 설계 패턴은 소프트웨어 개발에서 매우 중요하고, 특히 커다란 시스템을 만들 때는 더욱 중요하지만, 우리가 지금 다룰 수 있는 주제는 아니다. 우리는 여기서 매우 작은 규모의 설계 및 코드 작성 문제만 다룰 것이다.

    전략적 설계, 보편 언어를 통해 도메인 모델을 발견했을 것이고, 우리는 이를 설계와 코드에 반영할 수 있다. 이게 바로 모델 주도 설계(Model Driven Design)이다.

    도메인 모델은 몇 가지로 구분할 수 있는데, 여기서는 대표적인 패턴 몇 가지만 다룰 것이다:

    1. Entity
    2. Value Object
    3. Aggregate
    4. Reposito
2.  엔티티 (Entity) vs 일반적으로 이야기하는 개체 (Entity)

    **엔티티 (Entity)**

    OOP에서 대부분의 객체는 속성이 아니라 연속성, 식별성에 따라 정의된다. 조영호님의 표현에 따르면, 앨리스는 키가 변한다고 해도 앨리스다. 요즘 식으로 하면 앤트맨이 작아지거나 커진다고 해도 앤트맨이라는 사실 자체는 변하지 않는다. 또한, 앤트맨은 와스프와 구별된다. 심지어 속성이 같은 다른 세계의 앤트맨이 등장한다고 해도, 둘은 구별된다.

    거칠게 이야기하면, 식별자(Identifier)가 존재하고, 이를 통해 동일성(Identity)을 확인한다면 Entity라고 할 수 있다.

    이는 일반적으로 이야기하는 개체(Entity)와 구별되고, 이런 혼란을 막기 위해 우리는 OOP 또는 DDD라는 Bounded Context 안에서 Entity를 다룰 것이다.&#x20;



3.  값 객체 (Value Object, VO)

    어떤 객체는 연속성, 식별성이 중요하지 않다. 만 원은 그냥 만 원으로 다루는 게 “여기 있는 만 원”과 “저기 있는 만 원”이 다르다고 주장하는 것보다 훨씬 유용하다. 즉, 우리의 쇼핑몰 비즈니스 도메인을 다루기에 적합한 추상화, 모델링이라고 할 수 있다. 이 때 사용되는 게 바로 Value Object다.

    만약 검은 돈을 추적하고 있다면 “여기 있는 만 원”과 “저기 있는 만 원”은 일련번호 등으로 구분해서 다뤄야 하고, 이건 일련번호를 Identifier로 갖는 Entity라고 할 수 있다. 즉, 어떤 것이 Entity인지 Value Object인지는 미리 정해진 게 아니다. 오로지 우리의 비즈니스 도메인에 달려 있다고 할 수 있다.

    Value Object는 속성을 통해 동등성(Equality)을 판단한다. 즉, Value Object는 항상 Java의 equals 메서드를 구현해야 한다. 또한, 예측 가능성을 높이고 혼란을 막기 위해, 가능하면 불변 객체로 만들어야 한다. Java 14 이상이라면 record가 이를 간단히 지원한다(다만, 아직은 JPA와 함께 사용하기 어렵다).
4. 동일성(Identity)과 동등성(Equality)
