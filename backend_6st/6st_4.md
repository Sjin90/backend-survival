**4. Entity-Relationship Model**

**(1) ERM(Entity-Relationship Model)**
데이터 모델링 분야에서 개체-관계 모델이란 구조화된 데이터에 대한 일련의 표현
ERM 프로세스의 산출물을 가리켜 개체-관계 다이어그램(Entity-Relationship Diagram)

**(2) Entity**
개체(엔티티)는 분리된 물체 하나를 표현한다. 
엔티티는 명사 하나에 해당한다고 생각하면 쉽다. 
예: 컴퓨터(1개), 사람(1명), 악곡(1개), 수학적 정리(1개). 
엔티티는 사각형으로 표시된다.

**(3) RelationShip**
관계(릴레이션쉽)는 두 개 이상의 엔티티들이 어떻게 서로 연관되어 있는가를 나타냄. 
예: 회사와 컴퓨터 사이의 "소유하다"라는 관계, 상사와 부하 직원 사이의 "감독하다"라는 관계, 연주자와 악곡 사이의 "연주"라는 관계, 수학자와 수학 정리 사이의 "증명했다"라는 관계 등
관계는 다이아몬드형으로 그리는데, 관계된 엔티티와는 실선으로 연결한다.

**(3) Attribute**
엔티티도 애트리뷰트를 가질 수 있고, 관계도 애트리뷰트를 가질 수 있다. 
예: employee인 엔티티- 생년월일(SSN) 애트리뷰트, "proved" 관계- "날짜(date)" 애트리뷰트
애트리뷰트는 엔티티 집합이나 관계 집합에 선으로 연결시킨 타원형들로 그린다.
모든 엔티티(위크 엔티티가 아닌 한)는 "고유하게 식별되는" 애트리뷰트 집합을 가지고 있어야 한다. 
최소한의 고유 식별 애트리뷰트 집합은 엔티티의 기본 키(Primary Key)라 불린다.

**(4) 데이터베이스정규화**
- 데이터베이스 정규화의 목적 : 관계형 데이터베이스의 설계에서 중복을 최소화하여 무결성을 유지하며, 불필요한 DB저장용량을 줄여 효율적인 데이터 관리를 목적으로 함
- 정규화의 장점
데이터베이스 변경 시 이상 현상(Anomaly)을 제거할 수 있다.
정규화된 데이터베이스 구조에서는 새로운 데이터 형의 추가로 인한 확장 시, 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다.
데이터베이스와 연동된 응용 프로그램에 최소한의 영향만을 미치게 되어 응용프로그램의 생명을 연장시킨다.
- 정규화의 단점
릴레이션의 분해로 인해 릴레이션 간의 JOIN연산이 많아진다.
질의에 대한 응답 시간이 느려질 수도 있다. 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과가 있다. 
따라서 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있다.
만약 조인이 많이 발생하여 성능 저하가 나타나면 반정규화(De-normalization)를 적용할 수도 있다.

- 제1 정규화 :  테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해하는 것
관계형 데이터베이스의 릴레이션은 모든 속성이 원자 값을 가지는 특성이 있기 때문에, 최소한 제1정규형을 만족해야 릴레이션이 될 자격이 있다.

예) 고객-주문상품들을 관리하는 테이블이 존재한다면, 주문상품들 속성의 튜플의 값에 토마토,오이 이런식으로 복수의 값이 임의로 들어가는 것을 분해해야한다.
    정규화 전, 1개의 튜플에 (고객명) 영희 - (주문일자) 20230308 - (주문상품들) 토마토,오이로 들어가던 값을
    제1정규화 진행시, 2개의 튜플에 각각 (고객명) 영희 -(주문일자)20230308 -(주문상품)토마토 / (고객명) 영희 -(주문일자)20230308 -(주문상품)오이로 데이터를 관리한다.


- 제2 정규화 :  제1정규형만 만족시키는 릴레이션에서 부분 함수 종속성을 가지게 되는 경우 삽입이상, 갱신이상, 삭제이상 세가지 이상현상이 모두 나타나게 된다.
제1정규형에 속하면서, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되면 제2정규형이다.

예) 학생 릴레이션 < 학번 | 과목코드 | 성적 | 강의실 >에서 함수적 종속성으로 보면 학번,과목코드 -> 성적 과 과목코드 -> 강의실 나온다.
여기서 강의실은 과목코드만 가지고도 강의실의 정보를 알 수 있으므로 이를 분리해주는것이 제2정규화이다. 
학생릴레이션 < 학번 | 과목코드 | 성적 > , 과목릴레이션 < 과목코드 | 강의실 > 으로 분리해줌

- 제3 정규화 : 제 2 정규형에 속하면서,
기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속이 되지 않으면 제 3 정규형이다.
이행 종속성이란 A->B, B->C 일 때 A->C 가 성립하면 이행 종속이라고 한다. 
예) 고객 릴레이션 < 고객번호 | 등급 | 할인율 > 이면 고객번호 -> 등급 , 등급-> 할인율 , 고객번호 -> 할인율 이런 경우,  이행 종속성이 존재하므로 제 3 정규형을 만족하지 않는다.
제3정규형을 만족하기 위해서 고객릴레이션< 고객번호| 등급 > , 등급릴레이션 < 등급 | 할인율 > 두개의 릴레이션으로 분리한다.

- BCNF 정규화(Boyce-Codd Normal Form)
3정규형을 만족해야 하며, 모든 결정자가 후보키 집합에 속해야 한다. 즉, 후보키 집합에 없는 칼럼이 결정자가 되어서는 안 된다는 뜻이다.
예) 학생릴레이션 < 학번 | 과목 | 지도교수 >
이때, 학생 + 과목이 기본키로 지도교수를 알 수 있다. 하지만 같은 과목을 다른교수가 가르칠 수 있어서 과목-> 지도교수의 종속은 성립하지 않는다. 대신 지도교수-> 과목의 종속은 성립한다. 
지도교수가 결정자 컬럼이 되어버렸으므로 BCNF를 만족하지 않는다.
이때, 학생릴레이션< 학번 | 지도교수 > 지도교수릴레이션 < 지도교수 | 과목 >

